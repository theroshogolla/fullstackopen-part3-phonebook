{"version":3,"sources":["components/AddForm.js","services/server_api.js","components/App.js","index.js"],"names":["Input","value","setter","onChange","event","target","AddForm","submitHandler","newNameState","newNumState","onSubmit","updater","type","baseUrl","fetchAll","axios","get","then","response","data","person","post","id","put","catch","error","console","log","status","delete","Person","name","number","deleteFunc","onClick","ShowPersons","persons","map","key","Search","input","handler","Notification","message","notifStyle","backgroundColor","border","borderRadius","fontStyle","fontSize","padding","marginBottom","style","App","useState","setPersons","newName","setNewName","newNum","setNewNum","newSearch","setNewSearch","showAll","setShowAll","notif","setNotif","setError","showPersons","filter","toLowerCase","includes","useEffect","phonebook_api","preventDefault","newPerson","existingPerson","find","window","confirm","setTimeout","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.6bb5d45a.chunk.js","sourcesContent":["import React from 'react'\n\n\nconst Input = ({value, setter}) => <input value={value} onChange={(event) => setter(event.target.value)} />\nconst AddForm = ({submitHandler, newNameState, newNumState}) => {\nreturn(\n  <>\n  <h3>Add Person</h3>\n  <form onSubmit={submitHandler}>\n    <div>\n      name: <Input value={newNameState.value} setter={newNameState.updater} />\n    </div>\n    <div>\n      number: <Input value={newNumState.value} setter={newNumState.updater} />\n    </div>\n    <div>\n      <button type=\"submit\">add</button>\n    </div>\n  </form>\n  </>\n  )\n}\n\nexport default AddForm\n","import axios from 'axios'\n\nconst baseUrl = 'api/persons'\nconst fetchAll = () => {\n  return axios\n         .get(baseUrl)\n         .then(response => response.data)\n}\n\nconst addToServer = (person) => {\n  return axios\n         .post(baseUrl, person)\n         .then(response => response.data)\n}\n\nconst updatePerson = (id, person) => {\n  return axios\n         .put(`${baseUrl}/${id}`, person)\n         .then(response => response)\n         .catch(error => {\n           console.log(error.response.status)\n           return error.response})\n}\n\nconst deletePerson = (id) => {\n  return axios\n         .delete(`${baseUrl}/${id}`)\n         .then(() => fetchAll())\n       }\n\n\nexport default {fetchAll, addToServer, updatePerson, deletePerson}\n","import React, { useState, useEffect } from 'react'\n\nimport AddForm from './AddForm'\nimport phonebook_api from '../services/server_api'\n\nconst Person = ({id, name, number, deleteFunc}) => {\n  return(\n    <>\n    <p>{name} {number}</p>\n    <button onClick={() => deleteFunc(id)}>delete</button>\n    </>\n  )\n}\nconst ShowPersons = ({persons, deleteFunc}) => {\n  return (<>\n    <h3>Numbers</h3>\n    {persons.map(({id, name, number}) => <Person key={id} id={id} name={name} number={number} deleteFunc={deleteFunc}/>)}\n    </>)\n}\n\nconst Search = ({input, handler}) => {\n  return(\n    <>\n    <strong>Search: </strong>\n    <input value={input} onChange={handler} />\n    </>\n  )\n}\n\nconst Notification = ({message, error}) => {\n  if(message === null)\n    return null\n  else {\n    const successStyle = {\n      backgroundColor: '#86868F',\n      border: 'solid #31C423',\n      borderRadius: 30,\n      fontStyle: 'italic',\n      fontSize: '20px',\n      padding: '10px',\n      marginBottom: '10px'\n    }\n\n    const errorStyle = {\n      backgroundColor: '#86868F',\n      border: 'solid #F20505',\n      borderRadius: 30,\n      fontStyle: 'italic',\n      fontSize: '20px',\n      padding: '10px',\n      marginBottom: '10px'\n    }\n\n    const notifStyle = error? errorStyle : successStyle\n    return (\n      <div style={notifStyle}>\n      {message}\n      </div>\n    )\n  }\n}\n\nconst App = () => {\n  const [ persons, setPersons ] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [newNum, setNewNum] = useState('')\n  const [newSearch, setNewSearch] = useState('')\n  const [showAll, setShowAll] = useState(true)\n  const [notif, setNotif] = useState(null)\n  const [error, setError] = useState(false)\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    const newPerson = {\n      id: newName,\n      name: newName,\n      number: newNum\n    }\n    const existingPerson = persons.find(({name}) => name === newName)\n    if(existingPerson){\n      const result = window.confirm(`${newName} is already in the phonebook. Replace old number with a new one?`)\n      if(result) {\n        phonebook_api\n        .updatePerson(existingPerson.id, newPerson)\n          .then(response => {\n            if(response.status === 400) {\n              setError(true)\n              setNotif(response.data.error)\n              setTimeout(() => {\n                setNotif(null)\n                setError(false)\n              }, 3000)\n\n            }\n            else {\n              setPersons(persons.map(person => person.id === response.data.id? response.data : person))\n              setNotif(`${newName} was successfully updated in phonebook`)\n              setNewName('')\n              setNewNum('')\n              setTimeout(() => {\n                setNotif(null)\n              }, 3000)\n            }\n          })\n      }\n    }\n    else{\n      phonebook_api\n      .addToServer(newPerson)\n        .then(data => {\n          setPersons([...persons, data])\n          setNotif(`${newName} was successfully added to phonebook`)\n          setNewName('')\n          setNewNum('')\n          setTimeout(() => {\n            setNotif(null)\n          }, 3000)\n          })\n\n    }\n  }\n\n\n  const handleDelete = (id) => {\n      const result = window.confirm(`Are you sure you want to delete ${id} from the phonebook?`)\n      if(result) {\n        phonebook_api\n        .deletePerson(id)\n          .then(data => {\n                setPersons(data)\n                })\n      }\n  }\n\n\n  const handleSearch = (event) => {\n    setShowAll(event.target.value === '')\n    setNewSearch(event.target.value)\n  }\n  const showPersons = showAll ? persons : persons.filter(({name}) => name.toLowerCase().includes(newSearch.toLowerCase()))\n\n  useEffect(() => {\n    phonebook_api\n    .fetchAll()\n    .then((data) => {\n      setPersons(data)\n    })\n  }, [])\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={notif} error={error} />\n      <Search input={newSearch} handler={handleSearch}/>\n      <AddForm submitHandler={addPerson} newNameState={{value: newName, updater: setNewName}} newNumState={{value: newNum, updater: setNewNum}} />\n      <ShowPersons persons={showPersons} deleteFunc={handleDelete}/>\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './components/App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}